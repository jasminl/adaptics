<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">   
 <meta>
  <!-- Stylesheets -->
  <link href="../web.css" type="text/css" rel="stylesheet"></link>
  <title>VLFeat - C API</title>
  
  
  <!-- Scripts-->
 
 </meta>
 
 <!-- Body Start -->
 <body>
  <div id="header">
   <!-- Google CSE Search Box Begins -->
   <form action=" http://www.vlfeat.org/search.html" method="get" id="cse-search-box" enctype="application/x-www-form-urlencoded">
    <div>
     <input type="hidden" name="cx" value="003215582122030917471:oq23albfeam"></input>
     <input type="hidden" name="cof" value="FORID:11"></input>
     <input type="hidden" name="ie" value="UTF-8"></input>
     <input type="text" name="q" size="31"></input>
     <input type="submit" name="sa" value="Search"></input>
    </div>
   </form>
   <script src="http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en" xml:space="preserve" type="text/javascript"></script>
   <!-- Google CSE Search Box Ends -->
   <h1>VLFeat.org</h1>
  </div>
  <div id="headbanner">
  C API
  </div>
  <div id="pagebody">
   <div id="sidebar"> <!-- Navigation Start -->
   <ul>
<li><a href="../index.html">Home</a>
</li>
<li><a href="../download.html">Download</a>
</li>
<li><a href="index.html" class='active' >C API</a>
</li>
<li><a href="../mdoc/mdoc.html">Matlab API</a>
</li>
<li><a href="../man/man.html">Man pages</a>
</li>
<li><a href="../overview/tut.html">Tutorials</a>
</li>
</ul>

   </div> <!-- sidebar -->
   <div id="content">
   
   <div class="doxygen">
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>getopt_long.c</h1><a href="getopt__long_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00006"></a>00006 <span class="comment">/* AUTORIGHTS</span>
<a name="l00007"></a>00007 <span class="comment">Copyright 2007 (c) Andrea Vedaldi and Brian Fulkerson</span>
<a name="l00008"></a>00008 <span class="comment"></span>
<a name="l00009"></a>00009 <span class="comment">This file is part of VLFeat, available in the terms of the GNU</span>
<a name="l00010"></a>00010 <span class="comment">General Public License version 2.</span>
<a name="l00011"></a>00011 <span class="comment">*/</span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="preprocessor">#include "<a class="code" href="generic_8h.html" title="Generic.">generic.h</a>"</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include "<a class="code" href="getopt__long_8h.html" title="getopt_long">getopt_long.h</a>"</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 VL_EXPORT <span class="keywordtype">int</span>    opterr = 1 ;
<a name="l00021"></a><a class="code" href="getopt__long_8h.html#90192dad337ffa282f4ee6685b22e44c">00021</a> VL_EXPORT <span class="keywordtype">int</span>    <a class="code" href="getopt__long_8c.html#90192dad337ffa282f4ee6685b22e44c" title="option parsing last error">optind</a> = 1 ; 
<a name="l00022"></a><a class="code" href="getopt__long_8h.html#2c619b8eb1760291fedf3e7b693f89e7">00022</a> VL_EXPORT <span class="keywordtype">int</span>    <a class="code" href="getopt__long_8c.html#2c619b8eb1760291fedf3e7b693f89e7" title="index of option to process in argv ">optopt</a> ; 
<a name="l00023"></a><a class="code" href="getopt__long_8h.html#850d62c8bf5d6f6d9b92cd86a00d6739">00023</a> VL_EXPORT <span class="keywordtype">char</span> * <a class="code" href="getopt__long_8c.html#850d62c8bf5d6f6d9b92cd86a00d6739" title="current option">optarg</a> ; 
<a name="l00024"></a><a class="code" href="getopt__long_8h.html#f5bfe44c46bdda657353f4fb2f93caa4">00024</a> VL_EXPORT <span class="keywordtype">int</span>    <a class="code" href="getopt__long_8c.html#f5bfe44c46bdda657353f4fb2f93caa4" title="argument of current option">optreset</a>;
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="preprocessor">#define BADCH '?'</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span><span class="preprocessor">#define BADARG  ':'</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span><span class="preprocessor">#define EEND    -1</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">#define EMSG  ""</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span>
<a name="l00064"></a>00064 VL_EXPORT
<a name="l00065"></a>00065 <span class="keywordtype">int</span>
<a name="l00066"></a><a class="code" href="getopt__long_8h.html#a3697e0a2c2656ceadadea4677e46730">00066</a> <a class="code" href="getopt__long_8c.html#a3697e0a2c2656ceadadea4677e46730" title="Parse long options - BSD style.">getopt_long</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *<span class="keyword">const</span> argv[],
<a name="l00067"></a>00067             <span class="keyword">const</span> <span class="keywordtype">char</span> *optstring,
<a name="l00068"></a>00068             <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structoption.html" title="getopt_long option">option</a> * longopts,
<a name="l00069"></a>00069             <span class="keywordtype">int</span> *longindex)
<a name="l00070"></a>00070 {
<a name="l00071"></a>00071   <span class="keyword">static</span> <span class="keywordtype">char</span> *place = EMSG;  <span class="comment">/* option letter processing */</span>
<a name="l00072"></a>00072   <span class="keyword">static</span> <span class="keywordtype">int</span>   optbegin  = 0 ;
<a name="l00073"></a>00073   <span class="keyword">static</span> <span class="keywordtype">int</span>   optend    = 0 ;
<a name="l00074"></a>00074   <span class="keywordtype">char</span>        *oli;   <span class="comment">/* option letter list index */</span>
<a name="l00075"></a>00075   <span class="keywordtype">int</span>          has_colon = 0 ;
<a name="l00076"></a>00076   <span class="keywordtype">int</span>          ret_val   = 0 ;
<a name="l00077"></a>00077 
<a name="l00078"></a>00078   <span class="comment">/* </span>
<a name="l00079"></a>00079 <span class="comment">     A semicolon at the beginning of optstring has a special meaning.</span>
<a name="l00080"></a>00080 <span class="comment">     If we find one, we annote and remove it.</span>
<a name="l00081"></a>00081 <span class="comment">  */</span>
<a name="l00082"></a>00082   has_colon = optstring &amp;&amp; optstring[0] == <span class="charliteral">':'</span> ;
<a name="l00083"></a>00083   <span class="keywordflow">if</span> (has_colon) ++ optstring ;
<a name="l00084"></a>00084 
<a name="l00085"></a>00085   <span class="comment">/*</span>
<a name="l00086"></a>00086 <span class="comment">   Here we are either processing a short option sequence or </span>
<a name="l00087"></a>00087 <span class="comment">   we start processing a new option. This is indicated by optreset.   </span>
<a name="l00088"></a>00088 <span class="comment">  */</span>
<a name="l00089"></a>00089 
<a name="l00090"></a>00090   <span class="keywordflow">if</span> (<a class="code" href="getopt__long_8c.html#f5bfe44c46bdda657353f4fb2f93caa4" title="argument of current option">optreset</a> || *place == <span class="charliteral">'\0'</span>) {
<a name="l00091"></a>00091     
<a name="l00092"></a>00092     <span class="comment">/* --------------------------------------------------------------</span>
<a name="l00093"></a>00093 <span class="comment">     *                                Look for next short/long option</span>
<a name="l00094"></a>00094 <span class="comment">     * ----------------------------------------------------------- */</span>
<a name="l00095"></a>00095     <a class="code" href="getopt__long_8c.html#f5bfe44c46bdda657353f4fb2f93caa4" title="argument of current option">optreset</a> = 0 ;
<a name="l00096"></a>00096     
<a name="l00097"></a>00097     <span class="comment">/* no more arguments ? */</span>
<a name="l00098"></a>00098     <span class="keywordflow">if</span> (<a class="code" href="getopt__long_8c.html#90192dad337ffa282f4ee6685b22e44c" title="option parsing last error">optind</a> &gt;= argc) {
<a name="l00099"></a>00099       place = EMSG ;
<a name="l00100"></a>00100       <span class="keywordflow">return</span> -1 ;
<a name="l00101"></a>00101     }
<a name="l00102"></a>00102     
<a name="l00103"></a>00103     <span class="comment">/* next argument that may hold an option */</span>
<a name="l00104"></a>00104     optbegin = <a class="code" href="getopt__long_8c.html#90192dad337ffa282f4ee6685b22e44c" title="option parsing last error">optind</a> ;
<a name="l00105"></a>00105 
<a name="l00106"></a>00106     <span class="comment">/* --------------------------------------------------------------</span>
<a name="l00107"></a>00107 <span class="comment">     *                                    look for an option to parse</span>
<a name="l00108"></a>00108 <span class="comment">     * ----------------------------------------------------------- */</span>
<a name="l00109"></a>00109     
<a name="l00110"></a>00110   parse_option_at_optbegin :    
<a name="l00111"></a>00111 
<a name="l00112"></a>00112     <span class="comment">/* place points to the candidate option */</span>
<a name="l00113"></a>00113     place = argv [optbegin] ;
<a name="l00114"></a>00114 
<a name="l00115"></a>00115     <span class="comment">/* an option is introduced by '-' */</span>
<a name="l00116"></a>00116     <span class="keywordflow">if</span> (place [0] != <span class="charliteral">'-'</span>) {
<a name="l00117"></a>00117       <span class="comment">/* this argument is not an option: try next argument */</span>
<a name="l00118"></a>00118       ++ optbegin ;
<a name="l00119"></a>00119       <span class="keywordflow">if</span> (optbegin &gt;= argc) {
<a name="l00120"></a>00120         <span class="comment">/* no more arguments to look for options */</span>
<a name="l00121"></a>00121         place = EMSG ;
<a name="l00122"></a>00122         <span class="keywordflow">return</span> -1 ;
<a name="l00123"></a>00123       }      
<a name="l00124"></a>00124       <span class="keywordflow">goto</span> parse_option_at_optbegin ;
<a name="l00125"></a>00125     }
<a name="l00126"></a>00126 
<a name="l00127"></a>00127     <span class="comment">/* consume leading `-' */</span>
<a name="l00128"></a>00128     ++ place ;
<a name="l00129"></a>00129 
<a name="l00130"></a>00130     <span class="comment">/* assume the option is composed of one argument only */</span>
<a name="l00131"></a>00131     optend = optbegin + 1 ;
<a name="l00132"></a>00132 
<a name="l00133"></a>00133     <span class="comment">/* assume no argument */</span>
<a name="l00134"></a>00134     <a class="code" href="getopt__long_8c.html#850d62c8bf5d6f6d9b92cd86a00d6739" title="current option">optarg</a> = 0 ;
<a name="l00135"></a>00135 
<a name="l00136"></a>00136     <span class="comment">/* --------------------------------------------------------------</span>
<a name="l00137"></a>00137 <span class="comment">     *                                                    option `--'</span>
<a name="l00138"></a>00138 <span class="comment">     * ----------------------------------------------------------- */</span>
<a name="l00139"></a>00139     
<a name="l00140"></a>00140     <span class="comment">/* this special option (void long option) ends the option processing */</span>
<a name="l00141"></a>00141     <span class="keywordflow">if</span> (place[0]        &amp;&amp; 
<a name="l00142"></a>00142         place[0] == <span class="charliteral">'-'</span> &amp;&amp; 
<a name="l00143"></a>00143         place[1] == <span class="charliteral">'\0'</span>) {
<a name="l00144"></a>00144 
<a name="l00145"></a>00145       <a class="code" href="getopt__long_8c.html#90192dad337ffa282f4ee6685b22e44c" title="option parsing last error">optind</a>  = optend ;
<a name="l00146"></a>00146       place   = EMSG ;
<a name="l00147"></a>00147       ret_val = -1 ;
<a name="l00148"></a>00148       <span class="keywordflow">goto</span> done_option ;
<a name="l00149"></a>00149     }
<a name="l00150"></a>00150 
<a name="l00151"></a>00151     <span class="comment">/* --------------------------------------------------------------</span>
<a name="l00152"></a>00152 <span class="comment">     *                                                    long option</span>
<a name="l00153"></a>00153 <span class="comment">     * ----------------------------------------------------------- */</span>
<a name="l00154"></a>00154 
<a name="l00155"></a>00155     <span class="keywordflow">if</span> (place[0]        &amp;&amp; 
<a name="l00156"></a>00156         place[0] == <span class="charliteral">'-'</span> &amp;&amp; 
<a name="l00157"></a>00157         place[1] ) {
<a name="l00158"></a>00158 
<a name="l00159"></a>00159       <span class="keywordtype">size_t</span> namelen ;
<a name="l00160"></a>00160       <span class="keywordtype">int</span> i ;
<a name="l00161"></a>00161       
<a name="l00162"></a>00162       <span class="comment">/* consume second `-' */</span>
<a name="l00163"></a>00163       ++ place ;
<a name="l00164"></a>00164       
<a name="l00165"></a>00165       <span class="comment">/* count characters before `=' */</span>
<a name="l00166"></a>00166       namelen = strcspn(place, <span class="stringliteral">"="</span>) ;
<a name="l00167"></a>00167       
<a name="l00168"></a>00168       <span class="comment">/* scan longopts for this option */</span>
<a name="l00169"></a>00169       <span class="keywordflow">for</span> (i = 0 ; longopts[i].<a class="code" href="structoption.html#dc503659d37af8017fb4b86d61c99086">name</a> != NULL ; ++ i) {
<a name="l00170"></a>00170         
<a name="l00171"></a>00171         <span class="keywordflow">if</span> (strlen  (       longopts[i].<a class="code" href="struct__VlFileMeta.html#5bc45347f10fddf076f4a7341ea866e0">name</a>) == namelen &amp;&amp;
<a name="l00172"></a>00172             strncmp (place, longopts[i].name, namelen) == 0 ) {
<a name="l00173"></a>00173           
<a name="l00174"></a>00174           <span class="comment">/* save back long option index */</span>
<a name="l00175"></a>00175           <span class="keywordflow">if</span> (longindex) *longindex = i ;
<a name="l00176"></a>00176           
<a name="l00177"></a>00177           <span class="comment">/* process long option argument */</span>
<a name="l00178"></a>00178           <span class="keywordflow">if</span> (longopts[i].has_arg == <a class="code" href="getopt__long_8h.html#6ece8d8dfa8378778f7290fdaba5b8bc">required_argument</a> ||
<a name="l00179"></a>00179               longopts[i].has_arg == <a class="code" href="getopt__long_8h.html#cca06c0a947656bd8b395bf1084ffb72">optional_argument</a>) {
<a name="l00180"></a>00180             
<a name="l00181"></a>00181             <span class="comment">/* --option=value style */</span>
<a name="l00182"></a>00182             <span class="keywordflow">if</span> (place[namelen] == <span class="charliteral">'='</span>) {
<a name="l00183"></a>00183               <a class="code" href="getopt__long_8c.html#850d62c8bf5d6f6d9b92cd86a00d6739" title="current option">optarg</a> = place + namelen + 1 ;
<a name="l00184"></a>00184             }
<a name="l00185"></a>00185             
<a name="l00186"></a>00186             <span class="comment">/* --option value style (only required_argument) */</span>
<a name="l00187"></a>00187             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (longopts[i].has_arg == <a class="code" href="getopt__long_8h.html#6ece8d8dfa8378778f7290fdaba5b8bc">required_argument</a>) {
<a name="l00188"></a>00188               <span class="comment">/* missing argument ? */</span>
<a name="l00189"></a>00189               <span class="keywordflow">if</span> (optbegin &gt;= argc - 1) {
<a name="l00190"></a>00190                 <span class="keywordflow">if</span> (! has_colon &amp;&amp; opterr)
<a name="l00191"></a>00191                   fprintf(stderr,
<a name="l00192"></a>00192                           <span class="stringliteral">"%s: option requires an argument -- %s\n"</span>,
<a name="l00193"></a>00193                           argv[0], place);
<a name="l00194"></a>00194                 place   = EMSG ;
<a name="l00195"></a>00195                 ret_val = has_colon ? BADARG : BADCH ;
<a name="l00196"></a>00196                 <span class="keywordflow">goto</span> done_option ;
<a name="l00197"></a>00197               }              
<a name="l00198"></a>00198               <a class="code" href="getopt__long_8c.html#850d62c8bf5d6f6d9b92cd86a00d6739" title="current option">optarg</a> = argv [optend] ;
<a name="l00199"></a>00199               ++ optend ;
<a name="l00200"></a>00200             }
<a name="l00201"></a>00201           }
<a name="l00202"></a>00202         
<a name="l00203"></a>00203           <span class="comment">/* determine return value */</span> 
<a name="l00204"></a>00204           <span class="keywordflow">if</span> (longopts[i].flag == NULL) {
<a name="l00205"></a>00205             ret_val = longopts[i].<a class="code" href="structoption.html#13bd155ec3b405d29c41ab8d0793be11">val</a> ;
<a name="l00206"></a>00206           }
<a name="l00207"></a>00207           <span class="keywordflow">else</span> {
<a name="l00208"></a>00208             *longopts[i].<a class="code" href="structoption.html#b366eea5fe7be25c1928328ba715e353">flag</a> = longopts[i].<a class="code" href="structoption.html#13bd155ec3b405d29c41ab8d0793be11">val</a>;
<a name="l00209"></a>00209             ret_val = 0 ;
<a name="l00210"></a>00210           }
<a name="l00211"></a>00211           
<a name="l00212"></a>00212           <span class="comment">/* mark sequence closed */</span>
<a name="l00213"></a>00213           place = EMSG ;
<a name="l00214"></a>00214           <span class="keywordflow">goto</span> done_option ;          
<a name="l00215"></a>00215         } <span class="comment">/* if match */</span>
<a name="l00216"></a>00216 
<a name="l00217"></a>00217       } <span class="comment">/* scan longoptions */</span>
<a name="l00218"></a>00218       
<a name="l00219"></a>00219       <span class="comment">/* no matching option found */</span>
<a name="l00220"></a>00220       <span class="keywordflow">if</span> (! has_colon &amp;&amp; opterr)
<a name="l00221"></a>00221         fprintf(stderr,
<a name="l00222"></a>00222                 <span class="stringliteral">"%s: illegal option -- %s\n"</span>, argv[0], place) ;
<a name="l00223"></a>00223       place   = EMSG ;
<a name="l00224"></a>00224       ret_val = BADCH ;
<a name="l00225"></a>00225       <span class="keywordflow">goto</span> done_option ;
<a name="l00226"></a>00226     }
<a name="l00227"></a>00227   } <span class="comment">/* end new option */</span>
<a name="l00228"></a>00228   
<a name="l00229"></a>00229     <span class="comment">/* --------------------------------------------------------------</span>
<a name="l00230"></a>00230 <span class="comment">     *                                   finish short option sequence</span>
<a name="l00231"></a>00231 <span class="comment">     * ----------------------------------------------------------- */</span>        
<a name="l00232"></a>00232   <a class="code" href="getopt__long_8c.html#2c619b8eb1760291fedf3e7b693f89e7" title="index of option to process in argv ">optopt</a> = (int) *place++ ;
<a name="l00233"></a>00233   
<a name="l00234"></a>00234   <span class="comment">/* search charcater in option list */</span>
<a name="l00235"></a>00235   oli = strchr(optstring, <a class="code" href="getopt__long_8c.html#2c619b8eb1760291fedf3e7b693f89e7" title="index of option to process in argv ">optopt</a>);
<a name="l00236"></a>00236     
<a name="l00237"></a>00237   <span class="comment">/* short option not found */</span>    
<a name="l00238"></a>00238   <span class="keywordflow">if</span> (!oli) {
<a name="l00239"></a>00239     
<a name="l00240"></a>00240     <span class="keywordflow">if</span> (! has_colon &amp;&amp; opterr)
<a name="l00241"></a>00241       fprintf(stderr,
<a name="l00242"></a>00242               <span class="stringliteral">"%s: illegal option -- %c\n"</span>, 
<a name="l00243"></a>00243               argv[0], <a class="code" href="getopt__long_8c.html#2c619b8eb1760291fedf3e7b693f89e7" title="index of option to process in argv ">optopt</a>);
<a name="l00244"></a>00244     
<a name="l00245"></a>00245     <span class="keywordflow">if</span> (*place) {
<a name="l00246"></a>00246       <span class="comment">/* more short options in the list */</span>
<a name="l00247"></a>00247       <span class="keywordflow">return</span> BADCH ;
<a name="l00248"></a>00248     }
<a name="l00249"></a>00249     
<a name="l00250"></a>00250     <span class="keywordflow">else</span> {
<a name="l00251"></a>00251       <span class="comment">/* error occured as last option in the list */</span>
<a name="l00252"></a>00252       place   = EMSG ;
<a name="l00253"></a>00253       ret_val = BADCH ;
<a name="l00254"></a>00254       <span class="keywordflow">goto</span> done_option ;
<a name="l00255"></a>00255     }
<a name="l00256"></a>00256   } <span class="comment">/* end short option not found */</span>
<a name="l00257"></a>00257   
<a name="l00258"></a>00258   <span class="keywordflow">if</span> (oli[1] != <span class="charliteral">':'</span>) {
<a name="l00259"></a>00259     <span class="comment">/* short option with no argument */</span>
<a name="l00260"></a>00260     
<a name="l00261"></a>00261     <span class="keywordflow">if</span> (*place) {
<a name="l00262"></a>00262       <span class="comment">/* more short options in the list */</span>
<a name="l00263"></a>00263       <span class="keywordflow">return</span> <a class="code" href="getopt__long_8c.html#2c619b8eb1760291fedf3e7b693f89e7" title="index of option to process in argv ">optopt</a> ;
<a name="l00264"></a>00264     }
<a name="l00265"></a>00265     <span class="keywordflow">else</span> {
<a name="l00266"></a>00266       <span class="comment">/* last option in the list */</span>
<a name="l00267"></a>00267       place   = EMSG ;
<a name="l00268"></a>00268       ret_val = <a class="code" href="getopt__long_8c.html#2c619b8eb1760291fedf3e7b693f89e7" title="index of option to process in argv ">optopt</a> ;
<a name="l00269"></a>00269       <span class="keywordflow">goto</span> done_option ;
<a name="l00270"></a>00270     }
<a name="l00271"></a>00271   
<a name="l00272"></a>00272   } <span class="keywordflow">else</span> {
<a name="l00273"></a>00273     <span class="comment">/* short option with argument */</span>
<a name="l00274"></a>00274     
<a name="l00275"></a>00275     <span class="comment">/* -ovalue style */</span>
<a name="l00276"></a>00276     <span class="keywordflow">if</span> (*place) {
<a name="l00277"></a>00277       <a class="code" href="getopt__long_8c.html#850d62c8bf5d6f6d9b92cd86a00d6739" title="current option">optarg</a>  = place ;
<a name="l00278"></a>00278       place   = EMSG ;
<a name="l00279"></a>00279       ret_val = <a class="code" href="getopt__long_8c.html#2c619b8eb1760291fedf3e7b693f89e7" title="index of option to process in argv ">optopt</a> ;
<a name="l00280"></a>00280       <span class="keywordflow">goto</span> done_option ;
<a name="l00281"></a>00281     }
<a name="l00282"></a>00282     <span class="comment">/* -o value style: missing argument */</span>
<a name="l00283"></a>00283     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (optbegin &gt;= argc - 1) {
<a name="l00284"></a>00284       <span class="keywordflow">if</span> (! has_colon &amp;&amp; opterr)
<a name="l00285"></a>00285         fprintf(stderr,
<a name="l00286"></a>00286                 <span class="stringliteral">"%s: option requires an argument -- %c\n"</span>,
<a name="l00287"></a>00287                 argv[0], <a class="code" href="getopt__long_8c.html#2c619b8eb1760291fedf3e7b693f89e7" title="index of option to process in argv ">optopt</a>);
<a name="l00288"></a>00288       place   = EMSG ;
<a name="l00289"></a>00289       ret_val = has_colon ? BADARG : BADCH ;
<a name="l00290"></a>00290       <span class="keywordflow">goto</span> done_option ;
<a name="l00291"></a>00291     }
<a name="l00292"></a>00292     
<a name="l00293"></a>00293     <span class="comment">/* -o value style: process argument */</span>
<a name="l00294"></a>00294     <a class="code" href="getopt__long_8c.html#850d62c8bf5d6f6d9b92cd86a00d6739" title="current option">optarg</a> = argv [optend] ;
<a name="l00295"></a>00295     ++ optend ;
<a name="l00296"></a>00296     place   = EMSG ;
<a name="l00297"></a>00297     ret_val = <a class="code" href="getopt__long_8c.html#2c619b8eb1760291fedf3e7b693f89e7" title="index of option to process in argv ">optopt</a> ;
<a name="l00298"></a>00298     <span class="keywordflow">goto</span> done_option ;
<a name="l00299"></a>00299   } <span class="comment">/* short with argument */</span>
<a name="l00300"></a>00300   
<a name="l00301"></a>00301  done_option :  
<a name="l00302"></a>00302   {
<a name="l00303"></a>00303     <span class="keywordtype">int</span> pos = optend - optbegin ;  <span class="comment">/* n of circular shifts */</span>
<a name="l00304"></a>00304     <span class="keywordtype">int</span> c   = pos ;
<a name="l00305"></a>00305     
<a name="l00306"></a>00306     <span class="keywordflow">while</span> (c --) {
<a name="l00307"></a>00307       <span class="keywordtype">int</span> i ;
<a name="l00308"></a>00308       <span class="keywordtype">char</span> *tmp = argv [optend - 1] ;
<a name="l00309"></a>00309       <span class="keywordflow">for</span> (i = optend - 1 ; i &gt; <a class="code" href="getopt__long_8c.html#90192dad337ffa282f4ee6685b22e44c" title="option parsing last error">optind</a> ; -- i) {
<a name="l00310"></a>00310         ((<span class="keywordtype">char</span>**)argv) [i] = argv [i-1] ;
<a name="l00311"></a>00311       }
<a name="l00312"></a>00312       ((<span class="keywordtype">char</span>**)argv) [optind] = tmp ;
<a name="l00313"></a>00313     }
<a name="l00314"></a>00314     <a class="code" href="getopt__long_8c.html#90192dad337ffa282f4ee6685b22e44c" title="option parsing last error">optind</a> += pos ;
<a name="l00315"></a>00315   }
<a name="l00316"></a>00316 
<a name="l00317"></a>00317   <span class="keywordflow">return</span> ret_val ;
<a name="l00318"></a>00318 }
</pre></div></div>
    <!-- Doc Here -->
   </div>
  
   </div>
   <div class="clear">&nbsp;</div>
  </div> <!-- pagebody -->
  <div id="footer">
   &copy; 2005-09 Andrea Vedaldi and Brian Fulkerson
  </div> <!-- footer -->
  
  <!-- Google Analytics Begins -->
  <script xml:space="preserve" type="text/javascript">
   //<![CDATA[
    var localre = /vlfeat.org/;
    if(document.location.host.search(localre) != -1)
    {
   var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
   document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
   }
   //]]>
  </script>
  <script xml:space="preserve" type="text/javascript">
    //<![CDATA[
    var localre = /vlfeat.org/;
    if(document.location.host.search(localre) != -1)
    {

   try {
   var pageTracker = _gat._getTracker("UA-4936091-2");
   pageTracker._trackPageview();
   } catch(err) {}

   }
   //]]>
  </script>
  <!-- Google Analytics Ends -->
 </body>
</html>

 
