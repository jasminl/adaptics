<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">   
 <meta>
  <!-- Stylesheets -->
  <link href="../web.css" type="text/css" rel="stylesheet"></link>
  <title>VLFeat - C API</title>
  
  
  <!-- Scripts-->
 
 </meta>
 
 <!-- Body Start -->
 <body>
  <div id="header">
   <!-- Google CSE Search Box Begins -->
   <form action=" http://www.vlfeat.org/search.html" method="get" id="cse-search-box" enctype="application/x-www-form-urlencoded">
    <div>
     <input type="hidden" name="cx" value="003215582122030917471:oq23albfeam"></input>
     <input type="hidden" name="cof" value="FORID:11"></input>
     <input type="hidden" name="ie" value="UTF-8"></input>
     <input type="text" name="q" size="31"></input>
     <input type="submit" name="sa" value="Search"></input>
    </div>
   </form>
   <script src="http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en" xml:space="preserve" type="text/javascript"></script>
   <!-- Google CSE Search Box Ends -->
   <h1>VLFeat.org</h1>
  </div>
  <div id="headbanner">
  C API
  </div>
  <div id="pagebody">
   <div id="sidebar"> <!-- Navigation Start -->
   <ul>
<li><a href="../index.html">Home</a>
</li>
<li><a href="../download.html">Download</a>
</li>
<li><a href="index.html" class='active' >C API</a>
</li>
<li><a href="../mdoc/mdoc.html">Matlab API</a>
</li>
<li><a href="../man/man.html">Man pages</a>
</li>
<li><a href="../overview/tut.html">Tutorials</a>
</li>
</ul>

   </div> <!-- sidebar -->
   <div id="content">
   
   <div class="doxygen">
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>mexutils.h</h1><a href="mexutils_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00006"></a>00006 <span class="comment">/* AUTORIGHTS</span>
<a name="l00007"></a>00007 <span class="comment">Copyright 2007 (c) Andrea Vedaldi and Brian Fulkerson</span>
<a name="l00008"></a>00008 <span class="comment"></span>
<a name="l00009"></a>00009 <span class="comment">This file is part of VLFeat, available in the terms of the GNU</span>
<a name="l00010"></a>00010 <span class="comment">General Public License version 2.</span>
<a name="l00011"></a>00011 <span class="comment">*/</span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="preprocessor">#include"mex.h"</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include&lt;<a class="code" href="generic_8h.html" title="Generic.">vl/generic.h</a>&gt;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include&lt;ctype.h&gt;</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include&lt;stdio.h&gt;</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include&lt;stdarg.h&gt;</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="preprocessor">#ifdef VL_COMPILER_MSC</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#define snprintf _snprintf</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#define vsnprintf _vsnprintf</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span>
<a name="l00024"></a>00024 <span class="preprocessor">#if !defined(MX_API_VER) | (MX_API_VER &lt; 0x07030000) </span>
<a name="l00025"></a>00025 <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keywordtype">int</span> mwSize ;
<a name="l00026"></a>00026 <span class="keyword">typedef</span> <span class="keywordtype">int</span> mwIndex ;
<a name="l00027"></a>00027 <span class="preprocessor">#endif</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span>
<a name="l00050"></a><a class="code" href="mexutils_8h.html#76600f902337bf06037c62b27d76255c">00050</a> <span class="preprocessor">#define VL_USE_MATLAB_ENV                                       \</span>
<a name="l00051"></a>00051 <span class="preprocessor">  vl_set_alloc_func (mxMalloc, mxRealloc, mxCalloc, mxFree) ;   \</span>
<a name="l00052"></a>00052 <span class="preprocessor">  vl_set_printf_func (mexPrintf) ;</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span>
<a name="l00069"></a>00069 <span class="keyword">static</span> mxArray *
<a name="l00070"></a><a class="code" href="mexutils_8h.html#cb6b7babe2d72a70fd87f45c25b92b03">00070</a> <a class="code" href="mexutils_8h.html#cb6b7babe2d72a70fd87f45c25b92b03" title="Create array with pre-allocated data.">uCreateNumericArray</a> (mwSize ndim, <span class="keyword">const</span> mwSize * dims, 
<a name="l00071"></a>00071                      mxClassID classid, <span class="keywordtype">void</span> * data)
<a name="l00072"></a>00072 {
<a name="l00073"></a>00073   mxArray *A ;
<a name="l00074"></a>00074 
<a name="l00075"></a>00075   <span class="keywordflow">if</span>  (data) {
<a name="l00076"></a>00076     mwSize dims_ [2] = {0, 0} ;
<a name="l00077"></a>00077     A = mxCreateNumericArray (2, dims_, classid, mxREAL) ;
<a name="l00078"></a>00078     mxSetData (A, data) ;
<a name="l00079"></a>00079     mxSetDimensions (A, dims, ndim) ;
<a name="l00080"></a>00080   } <span class="keywordflow">else</span> {
<a name="l00081"></a>00081     A = mxCreateNumericArray (ndim, dims, classid, mxREAL) ;
<a name="l00082"></a>00082   }
<a name="l00083"></a>00083   
<a name="l00084"></a>00084   <span class="keywordflow">return</span> A ;
<a name="l00085"></a>00085 }
<a name="l00086"></a>00086 
<a name="l00102"></a>00102 <span class="keyword">static</span> mxArray *
<a name="l00103"></a><a class="code" href="mexutils_8h.html#5ce253e48f58f2b79172695537c62402">00103</a> <a class="code" href="mexutils_8h.html#5ce253e48f58f2b79172695537c62402" title="Create an array with pre-allocated data.">uCreateNumericMatrix</a> (<span class="keywordtype">int</span> M, <span class="keywordtype">int</span> N, mxClassID classid, <span class="keywordtype">void</span> * data)
<a name="l00104"></a>00104 {
<a name="l00105"></a>00105   mxArray *A ;
<a name="l00106"></a>00106 
<a name="l00107"></a>00107   <span class="keywordflow">if</span>  (data) {
<a name="l00108"></a>00108     A = mxCreateNumericMatrix (0, 0, classid, mxREAL) ;
<a name="l00109"></a>00109     mxSetData (A, data) ;
<a name="l00110"></a>00110     mxSetM(A, M) ;
<a name="l00111"></a>00111     mxSetN(A, N) ;
<a name="l00112"></a>00112   } <span class="keywordflow">else</span> {
<a name="l00113"></a>00113     A = mxCreateNumericMatrix (M, N, classid, mxREAL) ;
<a name="l00114"></a>00114   }
<a name="l00115"></a>00115 
<a name="l00116"></a>00116   <span class="keywordflow">return</span> A ;
<a name="l00117"></a>00117 }
<a name="l00118"></a>00118 
<a name="l00127"></a>00127 <span class="keyword">static</span> mxArray *
<a name="l00128"></a><a class="code" href="mexutils_8h.html#237a04e511208177f7c00e11e5184b31">00128</a> <a class="code" href="mexutils_8h.html#237a04e511208177f7c00e11e5184b31" title="Create a plain scalar.">uCreateScalar</a> (<span class="keywordtype">double</span> x)
<a name="l00129"></a>00129 {
<a name="l00130"></a>00130   mxArray *A = mxCreateDoubleMatrix(1,1,mxREAL) ;
<a name="l00131"></a>00131   *mxGetPr(A) = x ;
<a name="l00132"></a>00132   <span class="keywordflow">return</span> A ;
<a name="l00133"></a>00133 }
<a name="l00134"></a>00134 
<a name="l00147"></a>00147 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00148"></a><a class="code" href="mexutils_8h.html#1c8c9615dfb27e6b8de0d79a6fdfa1f7">00148</a> <a class="code" href="mexutils_8h.html#1c8c9615dfb27e6b8de0d79a6fdfa1f7" title="Is the array a numeric scalar?">uIsScalar</a>(<span class="keyword">const</span> mxArray* A)
<a name="l00149"></a>00149 {
<a name="l00150"></a>00150   <span class="keywordflow">return</span> 
<a name="l00151"></a>00151     mxIsNumeric (A) &amp;&amp; mxGetNumberOfElements(A) == 1 ;
<a name="l00152"></a>00152 }
<a name="l00153"></a>00153 
<a name="l00170"></a>00170 <span class="keyword">static</span> <a class="code" href="host_8h.html#d32e7f8ec7333ff33998cf671a3b1412" title="Boolean.">vl_bool</a> 
<a name="l00171"></a><a class="code" href="mexutils_8h.html#a7d0db8905768dae70a5cfb3e3fcdb59">00171</a> <a class="code" href="mexutils_8h.html#a7d0db8905768dae70a5cfb3e3fcdb59" title="Is the array plain matrix?">uIsPlainArray</a> (<span class="keyword">const</span> mxArray* A)
<a name="l00172"></a>00172 {
<a name="l00173"></a>00173   <span class="keywordflow">return</span>
<a name="l00174"></a>00174     mxGetClassID(A) == mxDOUBLE_CLASS &amp;&amp;
<a name="l00175"></a>00175     ! mxIsComplex(A) &amp;&amp;
<a name="l00176"></a>00176     ! mxIsSparse(A) ;
<a name="l00177"></a>00177 }
<a name="l00178"></a>00178 
<a name="l00179"></a>00179 <span class="keyword">static</span> <a class="code" href="host_8h.html#d32e7f8ec7333ff33998cf671a3b1412" title="Boolean.">vl_bool</a> 
<a name="l00180"></a>00180 uIsPlainMatrix (<span class="keyword">const</span> mxArray* A, <span class="keywordtype">int</span> M, <span class="keywordtype">int</span> N)
<a name="l00181"></a>00181 {
<a name="l00182"></a>00182   <span class="keywordflow">return</span>
<a name="l00183"></a>00183     <a class="code" href="mexutils_8h.html#a7d0db8905768dae70a5cfb3e3fcdb59" title="Is the array plain matrix?">uIsPlainArray</a>(A) &amp;&amp;
<a name="l00184"></a>00184     mxGetNumberOfDimensions(A) == 2 &amp;&amp;
<a name="l00185"></a>00185     (M &lt; 0 || mxGetM(A) == M) &amp;&amp;
<a name="l00186"></a>00186     (N &lt; 0 || mxGetN(A) == N) ;   
<a name="l00187"></a>00187 }
<a name="l00188"></a>00188 
<a name="l00189"></a>00189 <span class="keyword">static</span> <a class="code" href="host_8h.html#d32e7f8ec7333ff33998cf671a3b1412" title="Boolean.">vl_bool</a> 
<a name="l00190"></a>00190 uIsPlainVector (<span class="keyword">const</span> mxArray* A, <span class="keywordtype">int</span> M)
<a name="l00191"></a>00191 {
<a name="l00192"></a>00192   <span class="keywordflow">return</span>
<a name="l00193"></a>00193     <a class="code" href="mexutils_8h.html#a7d0db8905768dae70a5cfb3e3fcdb59" title="Is the array plain matrix?">uIsPlainArray</a>(A) &amp;&amp;
<a name="l00194"></a>00194     mxGetNumberOfDimensions(A) == 2 &amp;&amp;
<a name="l00195"></a>00195     (mxGetM(A) == 1 || mxGetN(A) == 1) &amp;&amp;
<a name="l00196"></a>00196     (M &lt; 0 || (mxGetM(A) == M || mxGetN(A) == M)) ;
<a name="l00197"></a>00197 }
<a name="l00198"></a>00198 
<a name="l00199"></a>00199 <span class="keyword">static</span> <a class="code" href="host_8h.html#d32e7f8ec7333ff33998cf671a3b1412" title="Boolean.">vl_bool</a> 
<a name="l00200"></a>00200 uIsPlainScalar (<span class="keyword">const</span> mxArray* A)
<a name="l00201"></a>00201 {
<a name="l00202"></a>00202   <span class="keywordflow">return</span>
<a name="l00203"></a>00203     <a class="code" href="mexutils_8h.html#a7d0db8905768dae70a5cfb3e3fcdb59" title="Is the array plain matrix?">uIsPlainArray</a>(A) &amp;&amp;
<a name="l00204"></a>00204     mxGetNumberOfElements(A) == 1 ;
<a name="l00205"></a>00205 }
<a name="l00206"></a>00206 
<a name="l00207"></a>00207 
<a name="l00224"></a>00224 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00225"></a><a class="code" href="mexutils_8h.html#1b15752ea101ba3abaaf8860aae8978b">00225</a> <a class="code" href="mexutils_8h.html#1b15752ea101ba3abaaf8860aae8978b" title="Is the array a numeric matrix?">uIsMatrix</a> (<span class="keyword">const</span> mxArray* A, <span class="keywordtype">int</span> M, <span class="keywordtype">int</span> N)
<a name="l00226"></a>00226 {
<a name="l00227"></a>00227   <span class="keywordflow">return</span>
<a name="l00228"></a>00228     mxIsNumeric(A) &amp;&amp;
<a name="l00229"></a>00229     mxGetNumberOfDimensions(A) == 2 &amp;&amp;
<a name="l00230"></a>00230     (M &lt; 0 || mxGetM(A) == M) &amp;&amp;
<a name="l00231"></a>00231     (N &lt; 0 || mxGetN(A) == N) ;   
<a name="l00232"></a>00232 }
<a name="l00233"></a>00233 
<a name="l00248"></a>00248 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00249"></a><a class="code" href="mexutils_8h.html#29e5ca434a7aaf49de15457cc40f296e">00249</a> <a class="code" href="mexutils_8h.html#29e5ca434a7aaf49de15457cc40f296e" title="Is the array a vector?">uIsVector</a>(<span class="keyword">const</span> mxArray* A, <span class="keywordtype">int</span> N)
<a name="l00250"></a>00250 {
<a name="l00251"></a>00251   <span class="keywordflow">return</span>  
<a name="l00252"></a>00252     <a class="code" href="mexutils_8h.html#1b15752ea101ba3abaaf8860aae8978b" title="Is the array a numeric matrix?">uIsMatrix</a>(A, 1, N) || <a class="code" href="mexutils_8h.html#1b15752ea101ba3abaaf8860aae8978b" title="Is the array a numeric matrix?">uIsMatrix</a>(A, N, 1) ;
<a name="l00253"></a>00253 }
<a name="l00254"></a>00254 
<a name="l00267"></a>00267 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00268"></a><a class="code" href="mexutils_8h.html#b962450cc2d0bb82e4824ad061f51f80">00268</a> <a class="code" href="mexutils_8h.html#b962450cc2d0bb82e4824ad061f51f80" title="Is the array real?">uIsReal</a> (<span class="keyword">const</span> mxArray* A)
<a name="l00269"></a>00269 {
<a name="l00270"></a>00270   <span class="keywordflow">return</span> 
<a name="l00271"></a>00271     mxIsDouble(A) &amp;&amp; 
<a name="l00272"></a>00272     ! mxIsComplex(A) ;
<a name="l00273"></a>00273 }
<a name="l00274"></a>00274 
<a name="l00287"></a>00287 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00288"></a><a class="code" href="mexutils_8h.html#a5e2b872c0cf270b64cf78ca0aa3c1b5">00288</a> <a class="code" href="mexutils_8h.html#a5e2b872c0cf270b64cf78ca0aa3c1b5" title="Is the array real and scalar?">uIsRealScalar</a>(<span class="keyword">const</span> mxArray* A)
<a name="l00289"></a>00289 {
<a name="l00290"></a>00290   <span class="keywordflow">return</span> 
<a name="l00291"></a>00291     <a class="code" href="mexutils_8h.html#b962450cc2d0bb82e4824ad061f51f80" title="Is the array real?">uIsReal</a> (A) &amp;&amp; mxGetNumberOfElements(A) == 1 ;
<a name="l00292"></a>00292 }
<a name="l00293"></a>00293 
<a name="l00310"></a>00310 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00311"></a><a class="code" href="mexutils_8h.html#c161d6212ab83e1fa97be90de8f9cb82">00311</a> <a class="code" href="mexutils_8h.html#c161d6212ab83e1fa97be90de8f9cb82" title="Is the array a real matrix?">uIsRealMatrix</a>(<span class="keyword">const</span> mxArray* A, <span class="keywordtype">int</span> M, <span class="keywordtype">int</span> N)
<a name="l00312"></a>00312 {
<a name="l00313"></a>00313   <span class="keywordflow">return</span>  
<a name="l00314"></a>00314     mxIsDouble(A) &amp;&amp;
<a name="l00315"></a>00315     !mxIsComplex(A) &amp;&amp;
<a name="l00316"></a>00316     mxGetNumberOfDimensions(A) == 2 &amp;&amp;
<a name="l00317"></a>00317     (M &lt; 0 || mxGetM(A) == M) &amp;&amp;
<a name="l00318"></a>00318     (N &lt; 0 || mxGetN(A) == N) ;   
<a name="l00319"></a>00319 }
<a name="l00320"></a>00320 
<a name="l00335"></a>00335 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00336"></a><a class="code" href="mexutils_8h.html#252efe5f96c0f1d3c4d29716039851a1">00336</a> <a class="code" href="mexutils_8h.html#252efe5f96c0f1d3c4d29716039851a1" title="Is the array a real vector?">uIsRealVector</a>(<span class="keyword">const</span> mxArray* A, <span class="keywordtype">int</span> N)
<a name="l00337"></a>00337 {
<a name="l00338"></a>00338   <span class="keywordflow">return</span>  
<a name="l00339"></a>00339     <a class="code" href="mexutils_8h.html#c161d6212ab83e1fa97be90de8f9cb82" title="Is the array a real matrix?">uIsRealMatrix</a>(A, 1, N) || <a class="code" href="mexutils_8h.html#c161d6212ab83e1fa97be90de8f9cb82" title="Is the array a real matrix?">uIsRealMatrix</a>(A, N, 1) ;
<a name="l00340"></a>00340 }
<a name="l00341"></a>00341 
<a name="l00358"></a>00358 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00359"></a><a class="code" href="mexutils_8h.html#86aeba58a0b843f89c1a0e987069b0f5">00359</a> <a class="code" href="mexutils_8h.html#86aeba58a0b843f89c1a0e987069b0f5" title="Is the array real with specified dimensions?">uIsRealArray</a>(<span class="keyword">const</span> mxArray* A, <span class="keywordtype">int</span> D, <span class="keywordtype">int</span>* dims)
<a name="l00360"></a>00360 {
<a name="l00361"></a>00361   <span class="keywordflow">if</span>(!mxIsDouble(A) || mxIsComplex(A))
<a name="l00362"></a>00362     <span class="keywordflow">return</span> 0 ;
<a name="l00363"></a>00363 
<a name="l00364"></a>00364   <span class="keywordflow">if</span>(D &gt;= 0) {
<a name="l00365"></a>00365     <span class="keywordtype">int</span> d ;
<a name="l00366"></a>00366     mwSize <span class="keyword">const</span> * actual_dims = mxGetDimensions(A) ;
<a name="l00367"></a>00367 
<a name="l00368"></a>00368     <span class="keywordflow">if</span>(mxGetNumberOfDimensions(A) != D)
<a name="l00369"></a>00369       <span class="keywordflow">return</span> 0 ;
<a name="l00370"></a>00370 
<a name="l00371"></a>00371     <span class="keywordflow">return</span> 1 ;
<a name="l00372"></a>00372     
<a name="l00373"></a>00373     <span class="keywordflow">if</span>(dims != NULL) {
<a name="l00374"></a>00374       <span class="keywordflow">for</span>(d = 0 ; d &lt; D ; ++d) {
<a name="l00375"></a>00375         <span class="keywordflow">if</span>(dims[d] &gt;= 0 &amp;&amp; dims[d] != actual_dims[d])
<a name="l00376"></a>00376           <span class="keywordflow">return</span> 0 ;
<a name="l00377"></a>00377       }
<a name="l00378"></a>00378     }
<a name="l00379"></a>00379   }
<a name="l00380"></a>00380   <span class="keywordflow">return</span> 1 ;
<a name="l00381"></a>00381 }
<a name="l00382"></a>00382 
<a name="l00398"></a>00398 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00399"></a><a class="code" href="mexutils_8h.html#8b13f96d5a5470804c4d94b60e07c549">00399</a> <a class="code" href="mexutils_8h.html#8b13f96d5a5470804c4d94b60e07c549" title="Is the array a string?">uIsString</a>(<span class="keyword">const</span> mxArray* A, <span class="keywordtype">int</span> L)
<a name="l00400"></a>00400 {
<a name="l00401"></a>00401   <span class="keywordtype">int</span> M = mxGetM(A) ;
<a name="l00402"></a>00402   <span class="keywordtype">int</span> N = mxGetN(A) ;
<a name="l00403"></a>00403 
<a name="l00404"></a>00404   <span class="keywordflow">return</span> 
<a name="l00405"></a>00405     mxIsChar(A) &amp;&amp;
<a name="l00406"></a>00406     mxGetNumberOfDimensions(A) == 2 &amp;&amp;
<a name="l00407"></a>00407     M == 1 &amp;&amp;
<a name="l00408"></a>00408     (L &lt; 0 || N == L) ;
<a name="l00409"></a>00409 }
<a name="l00410"></a>00410 
<a name="l00418"></a>00418 <span class="keywordtype">void</span>
<a name="l00419"></a><a class="code" href="mexutils_8h.html#6d797424f307e26d48f08b9534fb442d">00419</a> <a class="code" href="mexutils_8h.html#6d797424f307e26d48f08b9534fb442d" title="Formatted mexErrMsgTxt().">uErrMsgTxt</a>(<span class="keywordtype">char</span> <span class="keyword">const</span> * format, ...)
<a name="l00420"></a>00420 {
<a name="l00421"></a>00421   <span class="keyword">enum</span> { buffLen = 1024 } ;
<a name="l00422"></a>00422   <span class="keywordtype">char</span> buffer [buffLen] ;
<a name="l00423"></a>00423   va_list args;
<a name="l00424"></a>00424   va_start (args, format) ;
<a name="l00425"></a>00425 <span class="preprocessor">#ifdef VL_COMPILER_LCC</span>
<a name="l00426"></a>00426 <span class="preprocessor"></span>  vsprintf(buffer, format, args) ;
<a name="l00427"></a>00427 <span class="preprocessor">#else</span>
<a name="l00428"></a>00428 <span class="preprocessor"></span>  vsnprintf (buffer, buffLen, format, args) ;
<a name="l00429"></a>00429 <span class="preprocessor">#endif</span>
<a name="l00430"></a>00430 <span class="preprocessor"></span>  va_end (args) ;
<a name="l00431"></a>00431   mexErrMsgTxt (buffer) ;
<a name="l00432"></a>00432 }
<a name="l00433"></a>00433 
<a name="l00434"></a>00434 
<a name="l00439"></a><a class="code" href="struct__uMexOption.html">00439</a> <span class="keyword">struct </span><a class="code" href="struct__uMexOption.html" title="MEX option.">_uMexOption</a>
<a name="l00440"></a>00440 {
<a name="l00441"></a><a class="code" href="struct__uMexOption.html#a69e5a75c96291293fb0ee0c48699e08">00441</a>   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="struct__uMexOption.html#a69e5a75c96291293fb0ee0c48699e08">name</a> ; 
<a name="l00442"></a><a class="code" href="struct__uMexOption.html#3a190a6116e752092cf079af89cee74c">00442</a>   <span class="keywordtype">int</span> <a class="code" href="struct__uMexOption.html#3a190a6116e752092cf079af89cee74c">has_arg</a> ;      
<a name="l00443"></a><a class="code" href="struct__uMexOption.html#d412b9b44bc226fe56503cd6e79eb59f">00443</a>   <span class="keywordtype">int</span> <a class="code" href="struct__uMexOption.html#d412b9b44bc226fe56503cd6e79eb59f">val</a> ;          
<a name="l00444"></a>00444 } ;
<a name="l00445"></a>00445 
<a name="l00449"></a><a class="code" href="mexutils_8h.html#8a343d594738b6672b4f5ad73d07eb8f">00449</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__uMexOption.html" title="MEX option.">_uMexOption</a> <a class="code" href="struct__uMexOption.html" title="MEX option.">uMexOption</a> ;
<a name="l00450"></a>00450 
<a name="l00461"></a>00461 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00462"></a><a class="code" href="mexutils_8h.html#eb8facc0f350d442ab1b183677f6acca">00462</a> <a class="code" href="mexutils_8h.html#eb8facc0f350d442ab1b183677f6acca" title="Case insensitive string comparison.">uStrICmp</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s1, <span class="keyword">const</span> <span class="keywordtype">char</span> *s2)
<a name="l00463"></a>00463 {
<a name="l00464"></a>00464   <span class="keywordflow">while</span> (tolower((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)*s1) == 
<a name="l00465"></a>00465          tolower((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)*s2))
<a name="l00466"></a>00466   {
<a name="l00467"></a>00467     <span class="keywordflow">if</span> (*s1 == 0)
<a name="l00468"></a>00468       <span class="keywordflow">return</span> 0;
<a name="l00469"></a>00469     s1++;
<a name="l00470"></a>00470     s2++;
<a name="l00471"></a>00471   }
<a name="l00472"></a>00472   <span class="keywordflow">return</span> 
<a name="l00473"></a>00473     (<span class="keywordtype">int</span>)tolower((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)*s1) - 
<a name="l00474"></a>00474     (int)tolower((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)*s2) ;
<a name="l00475"></a>00475 }
<a name="l00476"></a>00476 
<a name="l00501"></a><a class="code" href="mexutils_8h.html#5f859da54b85634990a9560d7b7fe3e0">00501</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mexutils_8h.html#5f859da54b85634990a9560d7b7fe3e0" title="Process next option.">uNextOption</a>(mxArray <span class="keyword">const</span> *args[], <span class="keywordtype">int</span> nargs, 
<a name="l00502"></a>00502                        <a class="code" href="struct__uMexOption.html" title="MEX option.">uMexOption</a> <span class="keyword">const</span> *options, 
<a name="l00503"></a>00503                        <span class="keywordtype">int</span> *next, 
<a name="l00504"></a>00504                        mxArray <span class="keyword">const</span> **<a class="code" href="getopt__long_8c.html#850d62c8bf5d6f6d9b92cd86a00d6739" title="current option">optarg</a>)
<a name="l00505"></a>00505 {
<a name="l00506"></a>00506   <span class="keywordtype">char</span> err_msg [1024] ;
<a name="l00507"></a>00507   <span class="keywordtype">char</span> <a class="code" href="struct__uMexOption.html#a69e5a75c96291293fb0ee0c48699e08">name</a>    [1024] ;
<a name="l00508"></a>00508   <span class="keywordtype">int</span> opt = -1, i, len ;
<a name="l00509"></a>00509 
<a name="l00510"></a>00510   <span class="keywordflow">if</span> (*next &gt;= nargs) {
<a name="l00511"></a>00511     <span class="keywordflow">return</span> opt ;
<a name="l00512"></a>00512   }
<a name="l00513"></a>00513   
<a name="l00514"></a>00514   <span class="comment">/* check the array is a string */</span>
<a name="l00515"></a>00515   <span class="keywordflow">if</span> (! <a class="code" href="mexutils_8h.html#8b13f96d5a5470804c4d94b60e07c549" title="Is the array a string?">uIsString</a> (args [*next], -1)) {
<a name="l00516"></a>00516     snprintf(err_msg, <span class="keyword">sizeof</span>(err_msg),
<a name="l00517"></a>00517              <span class="stringliteral">"The option name is not a string (argument number %d)."</span>,
<a name="l00518"></a>00518              *next + 1) ;
<a name="l00519"></a>00519     mexErrMsgTxt(err_msg) ;
<a name="l00520"></a>00520   }
<a name="l00521"></a>00521 
<a name="l00522"></a>00522   <span class="comment">/* retrieve option name */</span>
<a name="l00523"></a>00523   len = mxGetNumberOfElements (args [*next]) ;
<a name="l00524"></a>00524   
<a name="l00525"></a>00525   <span class="keywordflow">if</span> (mxGetString (args [*next], name, <span class="keyword">sizeof</span>(name))) {
<a name="l00526"></a>00526     snprintf(err_msg, <span class="keyword">sizeof</span>(err_msg),
<a name="l00527"></a>00527              <span class="stringliteral">"The option name is too long (argument number %d)."</span>, 
<a name="l00528"></a>00528              *next + 1) ;
<a name="l00529"></a>00529     mexErrMsgTxt(err_msg) ;    
<a name="l00530"></a>00530   }
<a name="l00531"></a>00531   
<a name="l00532"></a>00532   <span class="comment">/* advance argument list */</span>
<a name="l00533"></a>00533   ++ (*next) ;
<a name="l00534"></a>00534         
<a name="l00535"></a>00535   <span class="comment">/* now lookup the string in the option table */</span>
<a name="l00536"></a>00536   <span class="keywordflow">for</span> (i = 0 ; options[i].<a class="code" href="struct__uMexOption.html#a69e5a75c96291293fb0ee0c48699e08">name</a> != 0 ; ++i) {    
<a name="l00537"></a>00537     <span class="keywordflow">if</span> (<a class="code" href="mexutils_8h.html#eb8facc0f350d442ab1b183677f6acca" title="Case insensitive string comparison.">uStrICmp</a>(name, options[i].name) == 0) {
<a name="l00538"></a>00538       opt = options[i].<a class="code" href="struct__uMexOption.html#d412b9b44bc226fe56503cd6e79eb59f">val</a> ;
<a name="l00539"></a>00539       break ;
<a name="l00540"></a>00540     }
<a name="l00541"></a>00541   }
<a name="l00542"></a>00542   
<a name="l00543"></a>00543   <span class="comment">/* unknown argument */</span>
<a name="l00544"></a>00544   <span class="keywordflow">if</span> (opt &lt; 0) {
<a name="l00545"></a>00545     snprintf(err_msg, <span class="keyword">sizeof</span>(err_msg),
<a name="l00546"></a>00546              <span class="stringliteral">"Unknown option '%s'."</span>, name) ;
<a name="l00547"></a>00547     mexErrMsgTxt(err_msg) ;
<a name="l00548"></a>00548   }
<a name="l00549"></a>00549 
<a name="l00550"></a>00550   <span class="comment">/* no argument */</span>
<a name="l00551"></a>00551   <span class="keywordflow">if</span> (! options [i].<a class="code" href="struct__uMexOption.html#3a190a6116e752092cf079af89cee74c">has_arg</a>) {
<a name="l00552"></a>00552     <span class="keywordflow">if</span> (optarg) *optarg = 0 ;
<a name="l00553"></a>00553     <span class="keywordflow">return</span> opt ;
<a name="l00554"></a>00554   }
<a name="l00555"></a>00555   
<a name="l00556"></a>00556   <span class="comment">/* argument */</span>
<a name="l00557"></a>00557   <span class="keywordflow">if</span> (*next &gt;= nargs) {
<a name="l00558"></a>00558     snprintf(err_msg, <span class="keyword">sizeof</span>(err_msg),
<a name="l00559"></a>00559              <span class="stringliteral">"Option '%s' requires an argument."</span>, options[i].name) ;
<a name="l00560"></a>00560     mexErrMsgTxt(err_msg) ;        
<a name="l00561"></a>00561   }
<a name="l00562"></a>00562 
<a name="l00563"></a>00563   <span class="keywordflow">if</span> (optarg) *optarg = args [*next] ;
<a name="l00564"></a>00564   ++ (*next) ;
<a name="l00565"></a>00565   <span class="keywordflow">return</span> opt ;  
<a name="l00566"></a>00566 }
</pre></div></div>
    <!-- Doc Here -->
   </div>
  
   </div>
   <div class="clear">&nbsp;</div>
  </div> <!-- pagebody -->
  <div id="footer">
   &copy; 2005-09 Andrea Vedaldi and Brian Fulkerson
  </div> <!-- footer -->
  
  <!-- Google Analytics Begins -->
  <script xml:space="preserve" type="text/javascript">
   //<![CDATA[
    var localre = /vlfeat.org/;
    if(document.location.host.search(localre) != -1)
    {
   var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
   document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
   }
   //]]>
  </script>
  <script xml:space="preserve" type="text/javascript">
    //<![CDATA[
    var localre = /vlfeat.org/;
    if(document.location.host.search(localre) != -1)
    {

   try {
   var pageTracker = _gat._getTracker("UA-4936091-2");
   pageTracker._trackPageview();
   } catch(err) {}

   }
   //]]>
  </script>
  <!-- Google Analytics Ends -->
 </body>
</html>

 
